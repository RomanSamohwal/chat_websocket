{"version":3,"sources":["api.ts","chat-reducer.ts","SelectionName.tsx","Messages.jsx","ButtonSend.js","Message.tsx","App.tsx","serviceWorker.ts","store.ts","index.tsx","Message.module.css","Chat.module.css","assests/chat.jpg","App.module.css","assests/wall.jpg"],"names":["api","socket","createConnection","this","io","subscribe","initMessagesHandler","newMessageHandler","userTypingHandler","on","destroyConnection","disconnect","sendName","name","emit","sendMessage","message","error","alert","typingMessage","initialState","messages","typingUsers","dispatch","SelectionName","useDispatch","useState","setName","setError","disable","setDisable","addButtonHandler","trim","setClientName","style","display","flexDirection","alignItems","justifyContent","TextField","variant","value","label","onChange","e","currentTarget","color","inputMode","onKeyPress","charCode","autoFocus","helperText","margin","Button","disabled","onClick","Messages","props","className","s","wrapper","cloud","width","text","children","useStyles","makeStyles","theme","button","spacing","IconLabelButtons","classes","endIcon","Message","chatBackground","backgroundImage","imageBack","useSelector","state","chat","isAutoScrollActive","setIsAutoScrollActive","lastScrollTop","setLastScrollTop","messagesAnchorRef","useRef","setMessage","useEffect","type","messageReceived","newMessageReceived","user","typingUserAdded","current","scrollIntoView","behavior","addItemHandler","Chat","onScroll","element","maxScrollPosition","scrollHeight","clientHeight","module","Math","abs","scrollTop","map","m","key","id","ref","borderColor","App","background","Boolean","window","location","hostname","match","rootReducer","combineReducers","action","filter","u","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","exports"],"mappings":"kOAMaA,EAAM,CACfC,OAAQ,KACRC,iBAFe,WAGXC,KAAKF,OAASG,IAPb,iDASLC,UALe,SAKLC,EACAC,EACAC,GAAyC,IAAD,MAC9C,UAAAL,KAAKF,cAAL,SAAaQ,GAAG,0BAA2BH,GAC3C,UAAAH,KAAKF,cAAL,SAAaQ,GAAG,mBAAoBF,GACpC,UAAAJ,KAAKF,cAAL,SAAaQ,GAAG,cAAeD,IAEnCE,kBAZe,WAYM,IAAD,EAChB,UAAAP,KAAKF,cAAL,SAAaU,aACbR,KAAKF,OAAS,MAElBW,SAhBe,SAgBNC,GAAe,IAAD,EAEnB,UAAAV,KAAKF,cAAL,SAAaa,KAAK,mBAAoBD,IAE1CE,YApBe,SAoBHC,GAAkB,IAAD,EAEzB,UAAAb,KAAKF,cAAL,SAAaa,KAAK,sBAAuBE,GAAS,SAACC,GAC5CA,GAAOC,MAAMD,OAGxBE,cA1Be,WA0BE,IAAD,EACZ,UAAAhB,KAAKF,cAAL,SAAaa,KAAK,mBC/BpBM,EAAe,CACjBC,SAAU,GACVC,YAAc,IAgDLH,EAAgB,kBAAM,SAACI,GAChCvB,EAAImB,kB,0BChDKK,EAAgB,WAEzB,IAAMD,EAAWE,cAFc,EAGPC,mBAAS,IAHF,mBAGxBb,EAHwB,KAGlBc,EAHkB,OAILD,mBAAwB,MAJnB,mBAIxBT,EAJwB,KAIjBW,EAJiB,OAKDF,oBAAS,GALR,mBAKxBG,EALwB,KAKfC,EALe,KAOzBC,EAAmB,WACD,KAAhBlB,EAAKmB,QACLT,ED8BiB,SAACV,GAAD,OAAkB,SAACU,GAC5CvB,EAAIY,SAASC,IC/BIoB,CAAcpB,IACvBc,EAAQ,MAERC,EAAS,+BACTE,GAAW,KAenB,OAAO,yBAAKI,MAAO,CAACC,QAAS,OAAQC,cAAe,SAAUC,WAAY,SAAUC,eAAgB,WAChG,6BACI,kBAACC,EAAA,EAAD,CAAWC,QAAQ,WACRC,MAAO5B,EAAM6B,MAAM,kBACnBC,SAAU,SAACC,GAAD,OAAOjB,EAAQiB,EAAEC,cAAcJ,QACzCK,MAAO,UACPC,UAAW,OAAQC,WAjBZ,SAACJ,GACvBrB,EAASJ,KACK,OAAVF,IACAW,EAAS,MACTE,GAAW,IAEI,KAAfc,EAAEK,UACFlB,KAWWmB,WAAS,EACTjC,QAASA,EACTkC,WAAYlC,KAG3B,yBAAKiB,MAAO,CAACkB,OAAQ,QACjB,kBAACC,EAAA,EAAD,CAAQC,SAAUzB,EAASiB,MAAO,UAAWN,QAAQ,YAAYe,QAASxB,GAA1E,gB,iBC9BGyB,EAbE,SAACC,GACd,OAAO,yBAAKC,UAAWC,IAAEC,SACrB,yBAAKF,UAAWC,IAAEE,OACd,yBAAKH,UAAWC,IAAEE,OACd,yBAAKH,UAAWC,IAAE9C,MAAO4C,EAAM5C,MAChC,yBAAKqB,MAAO,CAAC4B,MAAO,OAAQ3B,QAAQ,OAAQC,cAAe,SAAWC,WAAY,SAAUC,eAAgB,WACxG,6BAAMmB,EAAMM,KAAMN,EAAMO,e,2CCJrCC,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,OAAQ,CACJhB,OAAQe,EAAME,QAAQ,QAIf,SAASC,EAAiBb,GACrC,IAAMc,EAAUN,IAEhB,OACI,6BACI,kBAACZ,EAAA,EAAD,CACIC,SAAUG,EAAMH,SAChBd,QAAQ,YACRM,MAAM,UACNY,UAAWa,EAAQH,OACnBI,QAAS,kBAAC,IAAD,MACTjB,QAASE,EAAM1C,aANnB,S,sCCLC0D,EAAU,WACnB,IAAMC,EAAiB,CACnBC,gBAAgB,OAAD,OAASC,IAAT,MAFM,EAKClD,mBAAwB,MALzB,mBAKlBT,EALkB,KAKXW,EALW,KAMnBP,EAAWwD,aAAY,SAACC,GAAD,OAAyBA,EAAMC,KAAK1D,YAC3DC,EAAcuD,aAAY,SAACC,GAAD,OAAyBA,EAAMC,KAAKzD,eAP3C,EAQ2BI,oBAAS,GARpC,mBAQlBsD,EARkB,KAQEC,EARF,OASiBvD,mBAAS,GAT1B,mBASlBwD,EATkB,KASHC,EATG,KAUnBC,EAAoBC,iBAAuB,MAVxB,EAWK3D,mBAAS,IAXd,mBAWlBV,EAXkB,KAWTsE,EAXS,KAYnB/D,EAAWE,cAEjB8D,qBAAU,WAEN,OADAhE,GJM8B,SAACA,GACnCvB,EAAIE,mBACJF,EAAIK,WAAU,SAACgB,GACPE,EARY,SAACF,GAAD,MAAoB,CAACmE,KAAM,oBAAqBnE,YAQnDoE,CAAgBpE,OAC1B,SAACL,GACAO,EATe,SAACP,GAAD,MAAmB,CAACwE,KAAM,wBAAyBxE,WASzD0E,CAAmB1E,OAEhC,SAAC2E,GACGpE,EAXY,SAACoE,GAAD,MAAgB,CAACH,KAAM,kBAAmBG,QAW7CC,CAAgBD,UIbtB,WACHpE,GJ4B2B,SAACA,GACpCvB,EAAIU,0BI3BD,IAEH6E,qBAAU,WACmB,IAAD,EAApBP,IACA,UAAAI,EAAkBS,eAAlB,SAA2BC,eAAe,CAACC,SAAU,cAE1D,CAAC1E,IAEJ,IAAM2E,EAAiB,WACI,KAAnBhF,EAAQgB,QACRT,EJQe,SAACP,GAAD,OAAqB,SAACO,GAC7CvB,EAAIe,YAAYC,IITCD,CAAYC,IACrBsE,EAAW,KAEX1D,EAAS,gCAcjB,OAAO,6BACH,yBAAKM,MAAOwC,EAAgBhB,UAAWxB,IAAM+D,KAAMC,SAAU,SAACtD,GAC1D,IAAIuD,EAAUvD,EAAEC,cACZuD,EAAoBD,EAAQE,aAAeF,EAAQG,aACnDC,EAASC,KAAKC,IAAIL,EAAoBD,EAAQO,WAAa,GAE3D9D,EAAEC,cAAc6D,UAAYxB,GAAiBqB,EAC7CtB,GAAsB,GAEtBA,GAAsB,GAE1BE,EAAiBvC,EAAEC,cAAc6D,aAEhCrF,EAASsF,KAAI,SAACC,GACX,OAAO,kBAAC,EAAD,CAAUC,IAAKD,EAAEE,GAAI/C,KAAM6C,EAAE5F,QAASH,KAAM+F,EAAEjB,KAAK9E,UAE7DS,EAAYqF,KAAI,SAACC,GACd,OAAO,yBAAKC,IAAKD,EAAEE,IACd,6BACI,kBAAC,EAAD,CAAUD,IAAKD,EAAEE,GAAI/C,KAAM,SAAUlD,KAAM+F,EAAE/F,MAAM,kBAAC,IAAD,YAKhE,yBAAKkG,IAAK3B,KAEd,yBAAK1B,UAAWxB,IAAMuC,SAClB,yBAAKvC,MAAO,CAACC,QAAQ,OAAQC,cAAe,SAAWC,WAAY,SAAUC,eAAgB,WACzF,kBAACC,EAAA,EAAD,CAAWL,MAAO,CAAC8E,YAAa,SACrBvE,MAAOzB,EACPwB,QAAQ,WACRvB,QAASA,EACT8B,UAAW,OACXL,MAAM,qBACNC,SAAU,SAACC,GAAD,OAAO0C,EAAW1C,EAAEC,cAAcJ,QAC5CU,WAAYlC,EACZ+B,WA9CG,SAACJ,GACvBrB,EAASJ,KACK,OAAVF,GACAW,EAAS,MAEM,KAAfgB,EAAEK,UACF+C,OA0CI,kBAAC1B,EAAD,CAAkBvD,YAAaiF,GAA/B,oB,kCCzEDiB,MAhBf,WAEI,IAAMC,EAAa,CACfvC,gBAAgB,OAAD,OAASC,IAAT,MAGnB,OACI,yBAAK1C,MAAOgF,EAAYxD,UAAWxB,IAAM+E,KACrC,6BACI,kBAAC,EAAD,MACA,kBAAC,EAAD,SCJIE,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,oBCdFC,EAAcC,YAAgB,CAAC1C,KPGR,WAA0D,IAAzDD,EAAwD,uDAA9B1D,EAAcsG,EAAgB,uCAChF,OAAQA,EAAOlC,MACX,IAAK,oBACD,OAAO,eAAIV,EAAX,CAAkBzD,SAAUqG,EAAOrG,WAEvC,IAAK,wBACD,OAAO,eACAyD,EADP,CACczD,SAAS,GAAD,mBAAMyD,EAAMzD,UAAZ,CAAsBqG,EAAO1G,UAC/CM,YAAawD,EAAMxD,YAAYqG,QAAO,SAACC,GAAD,OAAYA,EAAEd,KAAOY,EAAO1G,QAAQ2E,KAAKmB,QAGvF,IAAK,kBACD,OAAO,eAAIhC,EAAX,CAAkBxD,YAAY,GAAD,mBAAMwD,EAAMxD,YAAYqG,QAAO,SAACC,GAAD,OAAYA,EAAEd,KAAOY,EAAO/B,KAAKmB,OAAhE,CAAqEY,EAAO/B,SAE7G,QACI,OAAOb,MOhBN+C,EAAQC,YAAYN,EAAaO,YAAgBC,MCE9DC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,CAAUN,MAASA,GACf,kBAAC,EAAD,QAINO,SAASC,eAAe,SF4HpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAA3H,GACL4H,QAAQ5H,MAAMA,EAAMD,a,mBGhJ5BuF,EAAOuC,QAAU,CAAC,MAAQ,uBAAuB,QAAU,yBAAyB,OAAS,wBAAwB,KAAO,sBAAsB,KAAO,sBAAsB,KAAO,wB,mBCAtLvC,EAAOuC,QAAU,CAAC,KAAO,mBAAmB,QAAU,wB,mBCDtDvC,EAAOuC,QAAU,IAA0B,kC,mBCC3CvC,EAAOuC,QAAU,CAAC,IAAM,mB,mBCDxBvC,EAAOuC,QAAU,IAA0B,kC","file":"static/js/main.3e368832.chunk.js","sourcesContent":["import io from \"socket.io-client\";\r\n\r\nlet my = 'https://chat-websocket-backend.herokuapp.com';\r\nlet dimon = 'https://samurai-chat-back.herokuapp.com'\r\nlet localhost = 'http://localhost:3009'\r\n\r\nexport const api = {\r\n    socket: null as null | SocketIOClient.Socket,\r\n    createConnection() {\r\n        this.socket = io(my);\r\n    },\r\n    subscribe(initMessagesHandler: (messages: any) => void,\r\n              newMessageHandler: (message: any) => void,\r\n              userTypingHandler: (user: any) => void) {\r\n        this.socket?.on('init-messages-published', initMessagesHandler);\r\n        this.socket?.on('new-message-sent', newMessageHandler)\r\n        this.socket?.on('user-typing', userTypingHandler)\r\n    },\r\n    destroyConnection() {\r\n        this.socket?.disconnect()\r\n        this.socket = null;\r\n    },\r\n    sendName(name: string) {\r\n        // канал по которому придет сообщение на бэк , событие 'client-message-sent'\r\n        this.socket?.emit('client-name-sent', name)\r\n    },\r\n    sendMessage(message: string) {\r\n        // канал по которому придет сообщение на бэк , событие 'client-message-sent'\r\n        this.socket?.emit('client-message-sent', message, (error: string | null) => {\r\n            if(error) alert(error)\r\n        });\r\n    },\r\n    typingMessage() {\r\n        this.socket?.emit('client-typing');\r\n    }\r\n}","import {api} from './api';\r\n\r\nconst initialState = {\r\n    messages: [] as any,\r\n    typingUsers:  [] as any\r\n}\r\n\r\nexport const chatReducer = (state: initialStateType = initialState, action: any) => {\r\n    switch (action.type) {\r\n        case 'messages-received': {\r\n            return {...state, messages: action.messages}\r\n        }\r\n        case 'new-messages-received': {\r\n            return {\r\n                ...state, messages: [...state.messages, action.message],\r\n                typingUsers: state.typingUsers.filter((u: any) => u.id !== action.message.user.id)\r\n            }\r\n        }\r\n        case 'typingUserAdded': {\r\n            return {...state, typingUsers: [...state.typingUsers.filter((u: any) => u.id !== action.user.id), action.user]}\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nconst messageReceived = (messages: any) => ({type: 'messages-received', messages} )\r\nconst newMessageReceived = (message: any) => ({type: 'new-messages-received', message} )\r\nconst typingUserAdded = (user: any) => ({type: 'typingUserAdded', user} )\r\n\r\n\r\nexport const createConnection = () => (dispatch: any) => {\r\n    api.createConnection()\r\n    api.subscribe((messages: any) => {\r\n            dispatch(messageReceived(messages))\r\n        }, (message: any) => {\r\n            dispatch(newMessageReceived(message))\r\n        },\r\n        (user: any) => {\r\n            dispatch(typingUserAdded(user))\r\n        })\r\n}\r\n\r\nexport const setClientName = (name: string) => (dispatch: any) => {\r\n    api.sendName(name)\r\n}\r\n\r\nexport const sendMessage = (message: string) => (dispatch: any) => {\r\n    api.sendMessage(message)\r\n}\r\n\r\nexport const typingMessage = () => (dispatch: any) => {\r\n    api.typingMessage()\r\n}\r\n\r\nexport const destroyConnection = () => (dispatch: any) => {\r\n    api.destroyConnection()\r\n\r\n}\r\n\r\ntype initialStateType = typeof initialState","import React, {useState} from 'react';\r\nimport {setClientName, typingMessage} from './chat-reducer';\r\nimport {useDispatch} from 'react-redux';\r\nimport {Button, TextField} from '@material-ui/core';\r\n\r\nexport const SelectionName = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const [name, setName] = useState('');\r\n    const [error, setError] = useState<string | null>(null)\r\n    const [disable, setDisable] = useState(false)\r\n\r\n    const addButtonHandler = () => {\r\n        if (name.trim() !== '') {\r\n            dispatch(setClientName(name))\r\n            setName(\"\");\r\n        } else {\r\n            setError('required to enter your name')\r\n            setDisable(true)\r\n        }\r\n    }\r\n\r\n    const onKeyPressHandler = (e: any) => {\r\n        dispatch(typingMessage())\r\n        if (error !== null) {\r\n            setError(null);\r\n            setDisable(false)\r\n        }\r\n        if (e.charCode === 13) {\r\n            addButtonHandler();\r\n        }\r\n    }\r\n\r\n    return <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center'}}>\r\n        <div>\r\n            <TextField variant='outlined'\r\n                       value={name} label='enter your name'\r\n                       onChange={(e) => setName(e.currentTarget.value)}\r\n                       color={'primary'}\r\n                       inputMode={'text'} onKeyPress={onKeyPressHandler}\r\n                       autoFocus\r\n                       error={!!error}\r\n                       helperText={error}\r\n            />\r\n        </div>\r\n        <div style={{margin: '5px'}}>\r\n            <Button disabled={disable} color={'primary'} variant=\"contained\" onClick={addButtonHandler}\r\n            >send name\r\n            </Button>\r\n        </div>\r\n    </div>\r\n}","import React from 'react';\nimport s from \"./Message.module.css\";\n\nconst Messages = (props) => {\n    return <div className={s.wrapper}>\n        <div className={s.cloud}>\n            <div className={s.cloud}>\n                <div className={s.name}>{props.name}</div>\n               <div style={{width: '100%', display:'flex', flexDirection: 'column' , alignItems: 'center', justifyContent: 'center'}}>\n                   <div>{props.text}{props.children}</div>\n               </div>\n            </div>\n        </div>\n    </div>\n}\n\nexport default Messages;","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport {makeStyles} from '@material-ui/core/styles';\nimport SendIcon from '@material-ui/icons/Send';\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        margin: theme.spacing(1),\n    },\n}));\n\nexport default function IconLabelButtons(props) {\n    const classes = useStyles();\n\n    return (\n        <div>\n            <Button\n                disabled={props.disabled}\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.button}\n                endIcon={<SendIcon/>}\n                onClick={props.sendMessage}\n            >\n                Send\n            </Button>\n        </div>\n    );\n}","import React, {useEffect, useRef, useState} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {AppStateType} from './store';\r\nimport {createConnection, destroyConnection, sendMessage, typingMessage} from './chat-reducer';\r\nimport Messages from './Messages';\r\nimport style from './Chat.module.css'\r\nimport IconLabelButtons from './ButtonSend';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport BorderColorIcon from '@material-ui/icons/BorderColor';\r\nimport imageBack from './assests/chat.jpg'\r\n\r\nexport const Message = () => {\r\n    const chatBackground = {\r\n        backgroundImage: `url(${imageBack})`,\r\n    }\r\n\r\n    const [error, setError] = useState<string | null>(null)\r\n    const messages = useSelector((state: AppStateType) => state.chat.messages)\r\n    const typingUsers = useSelector((state: AppStateType) => state.chat.typingUsers)\r\n    const [isAutoScrollActive, setIsAutoScrollActive] = useState(true);\r\n    const [lastScrollTop, setLastScrollTop] = useState(0)\r\n    const messagesAnchorRef = useRef<HTMLDivElement>(null);\r\n    const [message, setMessage] = useState('');\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch(createConnection())\r\n        return () => {\r\n            dispatch(destroyConnection())\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isAutoScrollActive) {\r\n            messagesAnchorRef.current?.scrollIntoView({behavior: 'smooth'})\r\n        }\r\n    }, [messages])\r\n\r\n    const addItemHandler = () => {\r\n        if (message.trim() !== '') {\r\n            dispatch(sendMessage(message))\r\n            setMessage(\"\");\r\n        } else {\r\n            setError('required to enter a message')\r\n        }\r\n    }\r\n\r\n    const onKeyPressHandler = (e: any) => {\r\n        dispatch(typingMessage())\r\n        if (error !== null) {\r\n            setError(null);\r\n        }\r\n        if (e.charCode === 13) {\r\n            addItemHandler();\r\n        }\r\n    }\r\n\r\n    return <div>\r\n        <div style={chatBackground} className={style.Chat} onScroll={(e) => {\r\n            let element = e.currentTarget;\r\n            let maxScrollPosition = element.scrollHeight - element.clientHeight;\r\n            let module = Math.abs(maxScrollPosition - element.scrollTop) < 10\r\n\r\n            if (e.currentTarget.scrollTop > lastScrollTop && module) {\r\n                setIsAutoScrollActive(true);\r\n            } else {\r\n                setIsAutoScrollActive(false)\r\n            }\r\n            setLastScrollTop(e.currentTarget.scrollTop)\r\n        }}>\r\n            {messages.map((m: any) => {\r\n                return <Messages key={m.id} text={m.message} name={m.user.name}/>\r\n            })}\r\n            {typingUsers.map((m: any) => {\r\n                return <div key={m.id}>\r\n                     <div>\r\n                         <Messages key={m.id} text={'......'} name={m.name}><BorderColorIcon/></Messages>\r\n                         {/*<b>{m.name} : </b> .........<BorderColorIcon/>*/}\r\n                     </div>\r\n                </div>\r\n            })}\r\n            <div ref={messagesAnchorRef}></div>\r\n        </div>\r\n        <div className={style.Message}>\r\n            <div style={{display:'flex', flexDirection: 'column' , alignItems: 'center', justifyContent: 'center'}}>\r\n                <TextField style={{borderColor: 'white'}}\r\n                           value={message}\r\n                           variant='outlined'\r\n                           error={!!error}\r\n                           inputMode={'text'}\r\n                           label='enter your message'\r\n                           onChange={(e) => setMessage(e.currentTarget.value)}\r\n                           helperText={error}\r\n                           onKeyPress={onKeyPressHandler}>\r\n                </TextField>\r\n                <IconLabelButtons sendMessage={addItemHandler}>Send Message</IconLabelButtons>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\n/*<Messages key={m.id} text={'...typing message'} name={m.name}/>*/","import React from 'react';\nimport {SelectionName} from './SelectionName';\nimport {Message} from './Message';\nimport style from './App.module.css'\nimport imageBack from './assests/wall.jpg'\n\nfunction App() {\n\n    const background = {\n        backgroundImage: `url(${imageBack})`,\n    }\n\n    return (\n        <div style={background} className={style.App}>\n            <div>\n                <SelectionName/>\n                <Message/>\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import {applyMiddleware, combineReducers, createStore} from 'redux';\r\nimport thunk from 'redux-thunk'\r\nimport {chatReducer} from './chat-reducer';\r\n\r\nlet rootReducer = combineReducers({chat: chatReducer})\r\nexport type AppStateType = ReturnType<typeof rootReducer>\r\nexport const store = createStore(rootReducer, applyMiddleware(thunk))","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {store} from './store';\nimport {Provider} from 'react-redux';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store = {store}>\n        <App />\n    </Provider>\n\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cloud\":\"Message_cloud__2XHLC\",\"wrapper\":\"Message_wrapper__24nb1\",\"before\":\"Message_before__f6bjM\",\"name\":\"Message_name__2MOYi\",\"text\":\"Message_text__2mWN5\",\"time\":\"Message_time__33AfH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Chat\":\"Chat_Chat__LIjdK\",\"Message\":\"Chat_Message__2SoSG\"};","module.exports = __webpack_public_path__ + \"static/media/chat.0af77419.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__lTcle\"};","module.exports = __webpack_public_path__ + \"static/media/wall.1b810d41.jpg\";"],"sourceRoot":""}