(this.webpackJsonpchat_websocket=this.webpackJsonpchat_websocket||[]).push([[0],{116:function(e,t){},124:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(7),s=n.n(r),o=(n(93),n(14)),i=n(53),l=n(32),u=n(73),m=n.n(u),d={socket:null,createConnection:function(){this.socket=m()("https://chat-websocket-backend.herokuapp.com")},subscribe:function(e,t,n){var a,c,r;null===(a=this.socket)||void 0===a||a.on("init-messages-published",e),null===(c=this.socket)||void 0===c||c.on("new-message-sent",t),null===(r=this.socket)||void 0===r||r.on("user-typing",n)},destroyConnection:function(){var e;null===(e=this.socket)||void 0===e||e.disconnect(),this.socket=null},sendName:function(e,t){var n;null===(n=this.socket)||void 0===n||n.emit("client-name-sent",e,(function(e){console.log(e),t(e)}))},sendMessage:function(e){var t;null===(t=this.socket)||void 0===t||t.emit("client-message-sent",e,(function(e){e&&console.log(e)}))},typingMessage:function(){var e;null===(e=this.socket)||void 0===e||e.emit("client-typing")}},g={name:"",messages:[],typingUsers:[]},f=function(){return function(e){d.typingMessage()}},p=n(13),v=n(159),b=n(160),h=function(){var e=Object(p.c)((function(e){return e.chat.name}));console.log("SelectionName"+e);var t=Object(p.b)(),n=Object(a.useState)(""),r=Object(o.a)(n,2),s=r[0],i=r[1],l=Object(a.useState)(null),u=Object(o.a)(l,2),m=u[0],g=u[1],h=Object(a.useState)(!1),y=Object(o.a)(h,2),j=y[0],E=y[1],O=function(){""!==s.trim()?(t(function(e){return function(t){d.sendName(e,(function(e){t(function(e){return{type:"sentCurrentName",name:e}}(e))}))}}(s)),i("")):(g("required to enter your name"),E(!0))};return c.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},e?c.a.createElement("h1",null,e):c.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:"5px"}},c.a.createElement("div",null,c.a.createElement(v.a,{variant:"outlined",value:s,label:"enter your name",onChange:function(e){return i(e.currentTarget.value)},color:"primary",inputMode:"text",onKeyPress:function(e){t(f()),null!==m&&(g(null),E(!1)),13===e.charCode&&O()},autoFocus:!0,error:!!m,helperText:m})),c.a.createElement("div",{style:{margin:"5px"}},c.a.createElement(b.a,{disabled:j,color:"primary",variant:"contained",onClick:O},"send name"))))},y=n(41),j=n.n(y),E=function(e){return c.a.createElement("div",{className:j.a.wrapper},c.a.createElement("div",{className:j.a.cloud},c.a.createElement("div",{className:j.a.name},e.name),e.text,e.children))},O=n(51),_=n.n(O),k=n(158),M=n(78),x=n.n(M),C=Object(k.a)((function(e){return{button:{margin:e.spacing(1)}}}));function w(e){var t=C();return c.a.createElement("div",null,c.a.createElement(b.a,{disabled:e.disabled,variant:"contained",color:"primary",className:t.button,endIcon:c.a.createElement(x.a,null),onClick:e.sendMessage},"Send"))}var N=n(80),S=n.n(N),T=n(79),I=n.n(T),A=function(){var e={backgroundImage:"url(".concat(I.a,")")},t=Object(a.useState)(null),n=Object(o.a)(t,2),r=n[0],s=n[1],i=Object(p.c)((function(e){return e.chat.messages})),l=Object(p.c)((function(e){return e.chat.typingUsers})),u=Object(a.useState)(!0),m=Object(o.a)(u,2),g=m[0],b=m[1],h=Object(a.useState)(0),y=Object(o.a)(h,2),j=y[0],O=y[1],k=Object(a.useRef)(null),M=Object(a.useState)(""),x=Object(o.a)(M,2),C=x[0],N=x[1],T=Object(p.b)();Object(a.useEffect)((function(){return T((function(e){d.createConnection(),d.subscribe((function(t){e(function(e){return{type:"messages-received",messages:e}}(t))}),(function(t){e(function(e){return{type:"new-messages-received",message:e}}(t))}),(function(t){e(function(e){return{type:"typingUserAdded",user:e}}(t))}))})),function(){T((function(e){d.destroyConnection()}))}}),[]),Object(a.useEffect)((function(){var e;g&&(null===(e=k.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[i]);var A=function(){""!==C.trim()?(T(function(e){return function(t){d.sendMessage(e)}}(C)),N("")):s("required to enter a message")};return c.a.createElement("div",null,c.a.createElement("div",{style:e,className:_.a.Chat,onScroll:function(e){var t=e.currentTarget,n=t.scrollHeight-t.clientHeight,a=Math.abs(n-t.scrollTop)<10;e.currentTarget.scrollTop>j&&a?b(!0):b(!1),O(e.currentTarget.scrollTop)}},i.map((function(e){return c.a.createElement(E,{key:e.id,text:e.message,name:e.user.name})})),l.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement("div",null,c.a.createElement(E,{key:e.id,text:"......",name:e.name},c.a.createElement(S.a,null))))})),c.a.createElement("div",{ref:k})),c.a.createElement("div",{className:_.a.Message},c.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},c.a.createElement(v.a,{style:{borderColor:"white"},value:C,variant:"outlined",error:!!r,inputMode:"text",label:"enter your message",onChange:function(e){return N(e.currentTarget.value)},helperText:r,onKeyPress:function(e){T(f()),null!==r&&s(null),13===e.charCode&&A()}}),c.a.createElement(w,{sendMessage:A},"Send Message"))))},U=n(52),H=n.n(U),q=n(81),D=n.n(q);var K=function(){var e={backgroundImage:"url(".concat(D.a,")")};return c.a.createElement("div",{style:e,className:H.a.App},c.a.createElement("div",{className:H.a.Message},c.a.createElement("div",null,c.a.createElement(h,null)),c.a.createElement("div",null,c.a.createElement(A,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=n(25),B=n(82),J=Object(W.c)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"sentCurrentName":return Object(l.a)({},e,{name:t.name});case"messages-received":return Object(l.a)({},e,{messages:t.messages});case"new-messages-received":return Object(l.a)({},e,{messages:[].concat(Object(i.a)(e.messages),[t.message]),typingUsers:e.typingUsers.filter((function(e){return e.id!==t.message.user.id}))});case"typingUserAdded":return Object(l.a)({},e,{typingUsers:[].concat(Object(i.a)(e.typingUsers.filter((function(e){return e.id!==t.user.id}))),[t.user])});default:return e}}}),L=Object(W.d)(J,Object(W.a)(B.a));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(p.a,{store:L},c.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},41:function(e,t,n){e.exports={cloud:"Message_cloud__2XHLC",wrapper:"Message_wrapper__24nb1",before:"Message_before__f6bjM",name:"Message_name__2MOYi",text:"Message_text__2mWN5",time:"Message_time__33AfH"}},51:function(e,t,n){e.exports={Chat:"Chat_Chat__LIjdK",Message:"Chat_Message__2SoSG"}},52:function(e,t,n){e.exports={App:"App_App__lTcle",Message:"App_Message__1qr15"}},79:function(e,t,n){e.exports=n.p+"static/media/chat.0af77419.jpg"},81:function(e,t,n){e.exports=n.p+"static/media/wall.1b810d41.jpg"},88:function(e,t,n){e.exports=n(124)},93:function(e,t,n){}},[[88,1,2]]]);
//# sourceMappingURL=main.15ab5826.chunk.js.map