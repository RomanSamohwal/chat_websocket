(this.webpackJsonpchat_websocket=this.webpackJsonpchat_websocket||[]).push([[0],{114:function(e,t){},122:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(7),r=n.n(s),o=(n(91),n(27)),i=n(52),u=n(42),l=n(72),m=n.n(l),d={socket:null,createConnection:function(){this.socket=m()("https://chat-websocket-backend.herokuapp.com")},subscribe:function(e,t,n){var a,c,s;null===(a=this.socket)||void 0===a||a.on("init-messages-published",e),null===(c=this.socket)||void 0===c||c.on("new-message-sent",t),null===(s=this.socket)||void 0===s||s.on("user-typing",n)},destroyConnection:function(){var e;null===(e=this.socket)||void 0===e||e.disconnect(),this.socket=null},sendName:function(e){var t;null===(t=this.socket)||void 0===t||t.emit("client-name-sent",e)},sendMessage:function(e){var t;null===(t=this.socket)||void 0===t||t.emit("client-message-sent",e,(function(e){e&&alert(e)}))},typingMessage:function(){var e;null===(e=this.socket)||void 0===e||e.emit("client-typing")}},f={messages:[],typingUsers:[]},g=n(15),v=n(157),p=n(158),b=function(){var e=Object(g.b)(),t=Object(a.useState)(""),n=Object(o.a)(t,2),s=n[0],r=n[1];return c.a.createElement("div",null,c.a.createElement(v.a,{variant:"outlined",value:s,label:"enter your name",onChange:function(e){return r(e.currentTarget.value)},color:"primary",inputMode:"text",autoFocus:!0}),c.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){e(function(e){return function(t){d.sendName(e)}}(s))}},"send name"))},h=n(32),E=n.n(h),_=function(e){return c.a.createElement("div",{className:E.a.wrapper},c.a.createElement("div",{className:E.a.cloud},c.a.createElement("div",{className:E.a.cloud},c.a.createElement("div",{className:E.a.name},e.name),e.text)))},y=n(41),j=n.n(y),O=n(156),k=n(77),M=n.n(k),w=Object(O.a)((function(e){return{button:{margin:e.spacing(1)}}}));function C(e){var t=w();return c.a.createElement("div",null,c.a.createElement(p.a,{variant:"contained",color:"primary",className:t.button,endIcon:c.a.createElement(M.a,null),onClick:e.sendMessage},"Send"))}var N=n(78),S=n.n(N),x=function(){var e=Object(g.c)((function(e){return e.chat.messages})),t=Object(g.c)((function(e){return e.chat.typingUsers})),n=Object(a.useState)(!0),s=Object(o.a)(n,2),r=s[0],i=s[1],u=Object(a.useState)(0),l=Object(o.a)(u,2),m=l[0],f=l[1],p=Object(a.useRef)(null),b=Object(a.useState)(""),h=Object(o.a)(b,2),E=h[0],y=h[1],O=Object(g.b)();return Object(a.useEffect)((function(){return O((function(e){d.createConnection(),d.subscribe((function(t){e(function(e){return{type:"messages-received",messages:e}}(t))}),(function(t){e(function(e){return{type:"new-messages-received",message:e}}(t))}),(function(t){e(function(e){return{type:"typingUserAdded",user:e}}(t))}))})),function(){O((function(e){d.destroyConnection()}))}}),[]),Object(a.useEffect)((function(){var e;r&&(null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),c.a.createElement("div",null,c.a.createElement("div",{className:j.a.Chat,onScroll:function(e){var t=e.currentTarget,n=t.scrollHeight-t.clientHeight,a=Math.abs(n-t.scrollTop)<10;e.currentTarget.scrollTop>m&&a?i(!0):i(!1),f(e.currentTarget.scrollTop)}},e.map((function(e){return c.a.createElement(_,{key:e.id,text:e.message,name:e.user.name})})),t.map((function(e){return c.a.createElement("div",{key:e.id,className:j.a.Chat},c.a.createElement("div",null,c.a.createElement("b",null,e.name," : ")," .........",c.a.createElement(S.a,null)))})),c.a.createElement("div",{ref:p})),c.a.createElement("div",{className:j.a.Message},c.a.createElement("div",null,c.a.createElement(v.a,{value:E,onChange:function(e){return y(e.currentTarget.value)},onKeyPress:function(){O((function(e){d.typingMessage()}))}}),c.a.createElement(C,{sendMessage:function(){O(function(e){return function(t){d.sendMessage(e)}}(E)),y("")}},"Send Message"))))},T=n(79),U=n.n(T);var A=function(){return c.a.createElement("div",{className:U.a.App},c.a.createElement("div",null,c.a.createElement(b,null),c.a.createElement(x,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=n(24),I=n(80),W=Object(H.c)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"messages-received":return Object(u.a)({},e,{messages:t.messages});case"new-messages-received":return Object(u.a)({},e,{messages:[].concat(Object(i.a)(e.messages),[t.message]),typingUsers:e.typingUsers.filter((function(e){return e.id!==t.message.user.id}))});case"typingUserAdded":return Object(u.a)({},e,{typingUsers:[].concat(Object(i.a)(e.typingUsers.filter((function(e){return e.id!==t.user.id}))),[t.user])});default:return e}}}),B=Object(H.d)(W,Object(H.a)(I.a));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(g.a,{store:B},c.a.createElement(A,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},32:function(e,t,n){e.exports={cloud:"Message_cloud__2XHLC",wrapper:"Message_wrapper__24nb1",before:"Message_before__f6bjM",name:"Message_name__2MOYi",text:"Message_text__2mWN5",time:"Message_time__33AfH"}},41:function(e,t,n){e.exports={Chat:"Chat_Chat__LIjdK",Message:"Chat_Message__2SoSG"}},79:function(e,t,n){e.exports={App:"App_App__lTcle"}},86:function(e,t,n){e.exports=n(122)},91:function(e,t,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.ca75e050.chunk.js.map